<include file="Public:header" />
<eq name="haveHeaderMenu" value='true'>
    <include file="Public:menu" />
</eq>

<eq name="modelInfo.enablePrint" value="1">
<script language="javascript" src="__DXPUBLIC__/public/Lodop6.010/LodopFuncs.js"></script>
<object id="LODOP_OB" classid="clsid:2105C259-1E0C-4534-8141-A753534CB4CA" width=0 height=0 style="display:none"> 
	<embed id="LODOP_EM" type="application/x-print-lodop" width=0 height=0 pluginspage="install_lodop32.exe"></embed>
</object> 
</eq>

<link href="__DXPUBLIC__/min/g=dataListCss" rel="stylesheet" type="text/css" />
<script src="__DXPUBLIC__/public/DatePicker/WdatePicker.js" type="text/javascript"></script>

<notempty name="modelInfo.leftArea">
<div class="dataListLeftMenuArea">
    {$modelInfo.leftArea}
</div>
</notempty>

<div class="dataListDataArea">
	<input id="modelInfo_editTitle" value="{$modelInfo.editTitle}" type="hidden" />
    <table id="gridHeader" style="display:none">{$modelInfo['gridHeader']}</table>
    <notempty name="modelInfo.modelTitle">
    <div id="header_title" class="dataListHeader" style="margin-bottom: 0px;">
        <span style="vertical-align: middle;font-size: 22px;font-weight: bold;">{$modelInfo.modelTitle}</span>

      <?php
      if(!empty($modelInfo["searchHTML"])){
      ?>
      <span id='query_items' style="margin: 0 10px 0 10px;" class="input-prepend input-append">
          <?php
          if(!empty($modelInfo["searchHTML"])){
            print($modelInfo["searchHTML"]);
          }
          ?>
      </span>
      <?php
      }
      ?>

      <?php if (!$modelInfo["readOnly"]) { ?>
      <button class="btn" id='item_add' onclick="javascript:dataOpeAdd('{\\$InitSearchPara}','{$modelInfo['addTitle']}','{$Think.const.MODULE_NAME}');">{$modelInfo['addTitle']}</button>
      <?php } ?>
      <?php if ($modelInfo["enableImport"]) { ?>
        <form method="post" action="__URL__/importFromExcel" enctype="multipart/form-data">
            <input  type="file" name="file_stu" />
            <input type="submit"  value="导入Excel表" />
        </form>
      <?php }
      if(!empty($modelInfo["otherManageAction"])){
        print($modelInfo["otherManageAction"]);
      }
      ?>

  </div>
  </notempty>
  <div id="dataListCon">
    <div id="dataList"></div>
    <div id="grid-help-info">
      {$modelInfo["helpInfo"]}
    </div>
  </div>
</div>

<script src="__DXPUBLIC__/public/sigma_grid/gt_grid_all.js" type="text/javascript"></script>

<eq name="Think.config.APP_DEBUG" value="true">
	<script src="__DXPUBLIC__/public/sigma_grid/src/gt_base.js" type="text/javascript"></script>
	<script src="__DXPUBLIC__/public/sigma_grid/src/gt_grid.js" type="text/javascript"></script>
	<script src="__DXPUBLIC__/public/sigma_grid/src/gt_column.js" type="text/javascript"></script>
	<script src="__DXPUBLIC__/public/sigma_grid/src/gt_tool.js" type="text/javascript"></script>
</eq>

<script type="text/javascript" src="__DXPUBLIC__/min/g=dataListJs"></script>
<script type="text/javascript" src="__DXPUBLIC__/min/f=__PUBLIC__/js/dataope_ext.js"></script>

<script>
<!--
var dxGrid  = null;
$(function(){
	dxGrid	= new $.dxGrid();
	var gridFields        = {$gridFields};
	var datasetFields     = {$datasetFields};
	dxGrid.init({ "gridDiv":"dataList",",loadUrl":"","gridFields":gridFields,"datasetFields":datasetFields,"parentGridDiv":"dataListCon","enablePage":"{$modelInfo['enablePage']}","enableExport":"{$modelInfo['enableExport']}","enablePrint":"{$modelInfo['enablePrint']}"});
	dxGrid.setBaseURL("__URL__");
	dxGrid.setData(dxGrid.urladd("__URL__/get_datalist","{\\$InitSearchPara}"));
	<notempty name="ignoreInitSearch">
	dxGrid.setOrginURL("__URL__/get_datalist");
	</notempty>
	dxGrid.showGrid(['header_title','data_add','query_items','grid-help-info','Copyright',<?php echo intval(C("DATAOPE_LIST_HEIGHT"));?>,<?php echo empty($modelInfo["exclude_data_list_height"])?0:$modelInfo["exclude_data_list_height"];?>]);
});
-->
</script>


<include file="Public:footer"/>
