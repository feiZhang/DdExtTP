<notempty name="Think.get.haveHeader">
    <include file="Public:header" />
    <!--数据修改和新增的js 因为ajax加载js会出现异常，所以在 data_list中加载-->
    <script type="text/javascript" src="__DXPUBLIC__/public/jquery-upload-file/blueimp/js/load-image.min.js"></script>
    <script type="text/javascript" src="__DXPUBLIC__/public/jquery-upload-file/blueimp/js/tmpl.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/js/dataope_ext.js"></script>
    <script type="text/javascript" src="__DXPUBLIC__/min/g=dataEditJs"></script>
</notempty>
<notempty name="Think.get.haveHeaderMenu">
    <include file="Public:menu" />
</notempty>

<link href="__DXPUBLIC__/public/jquery-upload-file/css/jquery.fileupload-ui.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="__DXPUBLIC__/public/jquery-upload-file/blueimp/css/bootstrap-image-gallery.min.css">

<style>
.progress,.table{
    margin-bottom: 0px;
}
.table th, .table td {
    padding: 2px;
}
</style>

<form id="itemAddForm">
<block name="dataEditFormTable">
    <table class="itemAddTable" cellspacing="1" cellpadding="1" style="margin:10px">
        <?php
        $display_none_field = "";
        if(empty($modelInfo["addPageColumnNum"])) $modelInfo["addPageColumnNum"] = 1;
        $fieldSize = sizeof($listFields);$fieldIndex = 0;
        reset($listFields);
        $field = current($listFields);
        while($field!==false){
            $fieldInput="";
            printf("<tr class=\"itemAddTr\">\\n");
            for($i=$modelInfo["addPageColumnNum"];$i>0;--$i){
                if($fieldIndex<$fieldSize){
                    if($field["display_none"]){
                        $display_none_field .= DxFunction::createFieldInput($field);
                        ++$i;
                    }else{
                        printf("<td align='right' class='itemAddTd'><span class='itemAddField'><b>%s</b></span>:</td>\\n",$field["title"]);
                        printf("<td>%s</td>\\n",DxFunction::createFieldInput($field));
                    }
                    $field = next($listFields);
                }else{
                    $field = false;
                    printf("<td align='right' class='itemAddTd'></td>\\n");
                    printf("<td></td>\\n");
                }
                ++$fieldIndex;
            }
            echo "</tr>\\n";
        }
        ?>
    </table>
    <div style="display:none">
        <?php echo $display_none_field;?>
    </div>
</block>
<div style="display:none">
    <input id="modelName" name="modelName" value='{$modelName}' type='hidden' />
    <literal>
    <notempty name="pkId">
    <input id="pkId" name="pkId" value='{$pkId}' type='hidden' />
    </notempty>
    </literal>
</div>
</form>

<literal>
<script type="text/javascript">
<!--
function showInputValue(){
<php>
foreach($objectData as $key => $val){
    switch($listFields[$key]["type"]){
        case "enum":
            printf('$("input[type=radio][value=%s][id=%s]").attr("checked",true);',$val,$key);
            break;
        case "set":
            printf('$("input[type=checkbox]#%s").val("%s");',$key,$val);
            break;
        case "uploadFile":
            printf('uploadFile($("%s"),uploadFile_%s_options);',$key,$key);
            break;
        default:
            printf('$("#%s").val("%s");',$key,$val);
            printf('$("#%s").change();',$key);//触发事件，选择区域信息
        break;
    }
}
</php>
}
showInputValue();
$("#itemAddForm").validationEngine({
    //ajaxFormValidationMethod: 'post',
    onValidationComplete:formSubmitComplete
});
//-->
</script>
</literal>

<include file="Public:upload_file_tmpl" />

<notempty name="Think.get.haveHeader">
    <include file="Public:footer" />
</notempty>
